---
// TODO: Import your logo asset here, e.g.
// import logo from "../assets/signalforge-logo.svg";

interface Props {
  lang: string;
  common: any;
}

const { lang, common } = Astro.props;
const currentPath = Astro.url.pathname;

// Build nav links based on language
const navLinks = [
  { label: common.nav.home, href: lang === 'en' ? '/en' : '/' },
  { label: common.nav.services, href: lang === 'en' ? '/en/services' : '/services' },
  { label: common.nav.about, href: lang === 'en' ? '/en/about' : '/about' },
  { label: common.nav.contact, href: lang === 'en' ? '/en/contact' : '/contact' }
];

// Language switcher paths
const currentPathWithoutLang = currentPath.replace(/^\/en/, '') || '/';
const roPath = currentPathWithoutLang;
const enPath = `/en${currentPathWithoutLang === '/' ? '' : currentPathWithoutLang}`;
---

<header class="sticky top-0 z-50 bg-black-iron/95 backdrop-blur-md border-b border-white/10">
  <div class="container mx-auto px-4">
    <div class="flex items-center justify-between py-5">
      <div class="flex items-center">
        <!-- TODO: Replace this text with your logo image component -->
        <!-- Example: <img src={logo} alt="SignalForge logo" class="h-8" /> -->
        <a href={lang === 'en' ? '/en' : '/'} class="text-2xl font-bold text-white hover:text-signal-cyan transition-colors" style="font-family: var(--font-heading);">
          {common.siteTitle}
        </a>
      </div>

      <nav class="hidden md:flex items-center gap-8">
        <ul class="flex gap-8">
          {navLinks.map((link) => (
            <li>
              <a
                href={link.href}
                class={`text-sm font-medium transition-colors relative ${
                  currentPath === link.href
                    ? 'text-signal-cyan after:absolute after:bottom-[-8px] after:left-0 after:w-full after:h-0.5 after:bg-signal-cyan'
                    : 'text-data-silver hover:text-signal-cyan'
                }`}
                style="font-family: var(--font-subheading);"
              >
                {link.label}
              </a>
            </li>
          ))}
        </ul>

        <!-- Language Switcher -->
        <div class="flex items-center gap-2 text-data-silver text-sm">
          <a href={roPath} class={`hover:text-signal-cyan transition-colors ${lang === 'ro' ? 'text-signal-cyan font-semibold' : ''}`}>RO</a>
          <span>/</span>
          <a href={enPath} class={`hover:text-signal-cyan transition-colors ${lang === 'en' ? 'text-signal-cyan font-semibold' : ''}`}>EN</a>
        </div>
      </nav>

      <button class="md:hidden flex flex-col justify-center items-center w-10 h-10" aria-label="Toggle menu" id="mobile-menu-toggle">
        <span class="block w-6 h-0.5 bg-white mb-1.5 transition-all"></span>
        <span class="block w-6 h-0.5 bg-white mb-1.5 transition-all"></span>
        <span class="block w-6 h-0.5 bg-white transition-all"></span>
      </button>
    </div>

    <nav class="hidden pb-4" id="mobile-menu">
      <ul class="flex flex-col gap-4">
        {navLinks.map((link) => (
          <li>
            <a
              href={link.href}
              class={`block py-2 text-base font-medium transition-colors ${
                currentPath === link.href ? 'text-signal-cyan' : 'text-data-silver hover:text-signal-cyan'
              }`}
              style="font-family: var(--font-subheading);"
            >
              {link.label}
            </a>
          </li>
        ))}
        <li class="flex items-center gap-2 text-data-silver text-sm pt-2 border-t border-white/10">
          <a href={roPath} class={`hover:text-signal-cyan transition-colors ${lang === 'ro' ? 'text-signal-cyan font-semibold' : ''}`}>RO</a>
          <span>/</span>
          <a href={enPath} class={`hover:text-signal-cyan transition-colors ${lang === 'en' ? 'text-signal-cyan font-semibold' : ''}`}>EN</a>
        </li>
      </ul>
    </nav>
  </div>
</header>

<script>
  const menuToggle = document.getElementById('mobile-menu-toggle');
  const mobileMenu = document.getElementById('mobile-menu');

  if (menuToggle && mobileMenu) {
    menuToggle.addEventListener('click', () => {
      mobileMenu.classList.toggle('hidden');
    });
  }
</script>
